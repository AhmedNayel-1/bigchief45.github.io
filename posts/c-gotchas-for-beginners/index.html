<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="//gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.52" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>C Gotchas For Beginners &middot; Andrés Álvarez</title>

  
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/poole.css">
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/hyde.css">
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/extra.css">
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/overrides.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Andrés Álvarez" />

  
</head>

  <body class="theme-base-08 ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="http://aalvarez.me/"><h1>Andrés Álvarez</h1></a>
      <p class="lead">
       Software Engineer &amp; Web Developer 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="http://aalvarez.me/">Home</a> </li>
        <li><a href="/tags/">Tags</a></li>
        <li><a href="/about/"> About Me </a></li><li><a href="/portfolio/"> Portfolio </a></li>
      </ul>
    </nav>

    
    <ul id="social-media" class="list-inline">
      
        <li>
           <a href="mailto:andresalvarez353@gmail.com" target="_blank"><i class="fa fa-envelope fa-2x" title="E-Mail"></i></a>
        </li>
      

      
        <li>
          <a href="https://linkedin.com/in/aalvarez4" target="_blank"><i class="fa fa-linkedin fa-2x" title="LinkedIn"></i></a>
        </li>
      

      
        <li>
          <a href="https://github.com/BigChief45" target="_blank"><i class="fa fa-github fa-2x" title="Github"></i></a>
        </li>
      

      
        <li>
          <a href="https://www.instagram.com/aalvarez300" target="_blank"><i class="fa fa-instagram fa-2x" title="Instagram"></i></a>
        </li>
      

      
        <li>
          <a href="/feed.xml" target="_blank"><i class="fa fa-rss fa-2x" title="RSS"></i></a>
        </li>
      
    </ul>

    <p>&copy; 2018. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>C Gotchas For Beginners</h1>
  <time datetime=2017-02-07T00:00:00Z class="post-date">Tue, Feb 7, 2017</time>

  <p>Similar to <a href="/posts/javascript-gotchas-for-beginners.html">my post</a> on some must-know concepts about JavaScript for beginners, this is a list of concepts that show how C differs from other programming languages. These are concepts that you <strong>must</strong> know if you are to become a good C programmer.</p>

<h2 id="boolean-types">Boolean Types</h2>

<p>C actually does not have a boolean type. They are usually defined like this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#579">#define BOOL char
</span><span style="color:#579">#define FALSE 0
</span><span style="color:#579">#define TRUE 1</span></code></pre></div>
<p>However it is argued that it is a better practice to simply use integers instead (<code>0</code> and <code>1</code>).</p>

<h2 id="memory-address-of-array-elements">Memory Address of Array Elements</h2>

<p>In C, arrays have a contiguous memory allocation. We can verify this by printing the memory addresses of each element of an array. We can do so using <code>&amp;</code> to access the memory location of the array element:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#339;font-weight:bold">int</span> <span style="color:#06b;font-weight:bold">main</span>() {
  <span style="color:#339;font-weight:bold">char</span> vowels[] <span style="color:#333">=</span> {<span style="color:#04d;background-color:#fff0f0">&#39;a&#39;</span>, <span style="color:#04d;background-color:#fff0f0">&#39;e&#39;</span>, <span style="color:#04d;background-color:#fff0f0">&#39;i&#39;</span>, <span style="color:#04d;background-color:#fff0f0">&#39;o&#39;</span>, <span style="color:#04d;background-color:#fff0f0">&#39;u&#39;</span>};

  <span style="color:#080;font-weight:bold">for</span> (<span style="color:#339;font-weight:bold">int</span> i <span style="color:#333">=</span> <span style="color:#00d;font-weight:bold">0</span>; i <span style="color:#333">&lt;</span> <span style="color:#00d;font-weight:bold">5</span>; i<span style="color:#333">++</span>) {
    printf(<span style="background-color:#fff0f0">&#34;Address of vowel [%d]: %u</span><span style="color:#666;background-color:#fff0f0;font-weight:bold">\n</span><span style="background-color:#fff0f0">&#34;</span>, i, <span style="color:#333">&amp;</span>vowels[i]);
  }

  <span style="color:#080;font-weight:bold">return</span> <span style="color:#00d;font-weight:bold">0</span>;
}</code></pre></div>
<p>The above code will produces the following output for me:</p>

<pre><code>Address of vowel [0]: 3566467104
Address of vowel [1]: 3566467105
Address of vowel [2]: 3566467106
Address of vowel [3]: 3566467107
Address of vowel [4]: 3566467108
</code></pre>

<p>A character occupies <strong>one byte</strong> in memory. As you can see, the addresses of two consecutive elements of the array differ by <strong>one</strong>. The memory addresses might differ each time you run the program, therefore the output above will most likely differ from yours.</p>

<p>If you were using integer types instead of <code>char</code> types, the addresses would be increasing by 4 instead. This is because (in modern compilers) each integer element consists of 4 bytes.</p>

<h2 id="integer-division">Integer Division</h2>

<p>A division using positive integers <code>a / b</code> will  result in an integer division. However, if either <code>a</code> or <code>b</code> is negative, the result depends on the compiler (rounding can go toward zero or toward negative infinity in pre-C99; in C99+, the rounding goes toward <code>0</code>). The result has type <code>int</code>. <code>floor(a/b)</code> does the same division, converts the result to double, discards the (nonexistent) fractional part, and returns the result as a double.</p>

<p><strong>Source:</strong> <a href="http://stackoverflow.com/questions/12240228/c-integer-division-and-floor">http://stackoverflow.com/questions/12240228/c-integer-division-and-floor</a></p>

<h2 id="working-with-strings">Working With Strings</h2>

<p>A C string is defined as a pointer to an array of characters. When declaring strings that we want to manipulate, we should declare tham as an array of <strong>characters</strong>:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#339;font-weight:bold">char</span> name[] <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;Andres Alvarez&#34;</span>;</code></pre></div>
<p>The empty <code>[]</code> tells the compiler to calculate the size of the array automatically. This also equals to declaring the array using the specific size of the string, however when doing the latter approach we need to account for the <strong>string termination</strong> character, which is a special character (equal to <code>\0</code>) that indicates the end of the string.</p>

<p>Strings can also be declared by using a pointer to a character array:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#339;font-weight:bold">char</span> <span style="color:#333">*</span> name <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;Andres Alvarez&#34;</span>;</code></pre></div>
<h3 id="assigning-new-values">Assigning new values</h3>

<p>When we want to change a string value of a variable, we do so using the <code>strcpy</code> function. For example:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#339;font-weight:bold">char</span> name[] <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;Andres&#34;</span>;
strcpy(name, <span style="background-color:#fff0f0">&#34;new string&#34;</span>);</code></pre></div>
<h3 id="formatting-with-printf">Formatting with printf</h3>

<p>When we want to achieve some kind of interpolation in a string, we can use the <code>%s</code> (for strings), <code>%c</code> for characters, and <code>%d</code> (for integers) markers with <code>printf</code> to do so:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">printf(<span style="background-color:#fff0f0">&#34;%s is %d years old.</span><span style="color:#666;background-color:#fff0f0;font-weight:bold">\n</span><span style="background-color:#fff0f0">&#34;</span>, name, age);</code></pre></div>
<h2 id="functions">Functions</h2>

<p>Functions in C must be defined before they are used in the code. It is preferable that they are declared first and implemented later. For example:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#888">/* Declare the function */</span>
<span style="color:#339;font-weight:bold">int</span> <span style="color:#06b;font-weight:bold">launch</span>(<span style="color:#339;font-weight:bold">int</span> code);

<span style="color:#339;font-weight:bold">int</span> <span style="color:#06b;font-weight:bold">main</span>() {
  <span style="color:#888">/* Call the function */</span>
  printf(<span style="background-color:#fff0f0">&#34;The value of launch is %d</span><span style="color:#666;background-color:#fff0f0;font-weight:bold">\n</span><span style="background-color:#fff0f0">&#34;</span>, launch(<span style="color:#00d;font-weight:bold">10</span>));
}

<span style="color:#888">/* Implement the function */</span>
<span style="color:#339;font-weight:bold">int</span> <span style="color:#06b;font-weight:bold">launch</span>(<span style="color:#339;font-weight:bold">int</span> code) {
  <span style="color:#080;font-weight:bold">return</span> code <span style="color:#333">*</span> <span style="color:#00d;font-weight:bold">12300</span>;
}</code></pre></div>
<p>Functions that don&rsquo;t return values are declared using <code>void</code>, like in Java:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#339;font-weight:bold">void</span> <span style="color:#06b;font-weight:bold">launch</span>(<span style="color:#339;font-weight:bold">int</span> code) {
  printf(<span style="background-color:#fff0f0">&#34;Launching...&#34;</span>);
}

<span style="color:#339;font-weight:bold">int</span> <span style="color:#06b;font-weight:bold">main</span>() {
  launch();
}</code></pre></div>
<h2 id="dynamic-memory-allocation">Dynamic Memory Allocation</h2>

<p>This is where the <code>malloc</code> function (which C is very known for) is used. The malloc function will request a block of memory from the heap. If the request is granted, the operating system will reserve the requested amount of memory.</p>

<p>To dynamically allocate a chunk of memory, an available pointer is needed. This pointer will store the location of the newly allocated memory, making it accessible by using this same pointer. The pointer can also be used the free the memory once it is no longer needed.</p>

<p>For example, we can dynamically allocate just enough memory to hold a certain type of structure in memory, and then obtain a pointer that points to this newly allocated data:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#080;font-weight:bold">typedef</span> <span style="color:#080;font-weight:bold">struct</span> {
  <span style="color:#339;font-weight:bold">char</span> <span style="color:#333">*</span> brand;
  <span style="color:#339;font-weight:bold">int</span> year;
} vehicle;

vehicle <span style="color:#333">*</span> sedan <span style="color:#333">=</span> malloc(<span style="color:#080;font-weight:bold">sizeof</span>(vehicle));</code></pre></div>
<p>If there is not enough memory available, the malloc function will return a <code>NULL</code>. If the request is granted a block of memory is allocated, the address of the reserved block will be placed into the pointer variable.</p>

<p>=&gt; Always use <code>sizeof</code> when allocating memory. <strong>Never</strong> allocate specific amounts of memory like when using <code>malloc(4)</code> (Requesting 4 bytes). This will make your code much more portable.</p>

<p>We can then access and modify the pointer&rsquo;s members/attributes:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">sedan<span style="color:#333">-&gt;</span>brand <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;Toyota&#34;</span>;
sedan<span style="color:#333">-&gt;</span>year <span style="color:#333">=</span> <span style="color:#00d;font-weight:bold">1990</span>;</code></pre></div>
<p>To release the memory and return it to the operating system so that it can be used for other purposes, we use <code>free</code>:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">free(sedan);</code></pre></div>
<p>After the memory is released, the variable <code>sedan</code> will <strong><em>still</em></strong> point to somewhere in memory, but the area that was pointed to can no longer be accessed. Therefore we must not use this pointer again until new data is allocated using the pointer.</p>

<h2 id="references">References</h2>

<ol>
<li><a href="http://www.learn-c.org/">http://www.learn-c.org/</a></li>
</ol>
</div>


<div style="margin: 20px 0px;">
  
    <a href="http://aalvarez.me/tags/c" class="label label-default">c</a></li>
  
    <a href="http://aalvarez.me/tags/programming" class="label label-default">programming</a></li>
  
</div>


<h2>Comments</h2>
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "aalvarez-blog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </main>

    
  </body>
</html>

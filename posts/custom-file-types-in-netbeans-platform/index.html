<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="//gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.61.0" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <script type="application/ld+json">
{
    "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/aalvarez.me\/"
    },
    "articleSection" : "posts",
    "name" : "Custom File Types in Netbeans Platform",
    "headline" : "Custom File Types in Netbeans Platform",
    "description" : "\x3cp\x3eIf your desktop Java application needs to deal with very particular or special kinds of files, we can make use of Netbeans Platform\x27s custom File Type feature to define a file that our application can recognize, and display visual and editing components to view and edit the file\x27s data.\x3c\/p\x3e\n\x3cp\x3eMoreover, we can also make use of Netbeans Platform\x27s \x3cem\x3eFavorites\x3c\/em\x3e pane, which displays a tree view of a file system, where we can open the special files we need to work with.\x3c\/p\x3e\n\x3ch2 id=\x22creating-a-new-module\x22\x3eCreating a New Module\x3c\/h2\x3e\n\x3cp\x3eFor this article, we are going to create a new file type for CSV (Comma Separated Value) files. When we open these files, our application will display a visual representation in the form of an editable JTable.\x3c\/p\x3e\n\x3cp\x3eAll this functionaltiy will live in its own Netbeans Platform Module. Meaning that it can be plugged in into different applications in a modular fashion.\x3c\/p\x3e\n\x3cp\x3eWe are going to create the module and build it using \x3ca href=\x22https:\/\/maven.apache.org\/\x22\x3eMaven\x3c\/a\x3e, since we are also going to be adding some functionalities that depend on external libraries that we can easily include in our project with Maven. But you can also just create the module without Maven as well. To create the module go to \x3cem\x3eNew Project \x26gt; Maven \x26gt; Netbeans Module\x3c\/em\x3e\x3c\/p\x3e",
    "inLanguage" : "en-US",
    "author" : "",
    "creator" : "",
    "publisher": "",
    "accountablePerson" : "",
    "copyrightHolder" : "",
    "copyrightYear" : "2018",
    "datePublished": "2018-03-28 00:00:00 \x2b0000 UTC",
    "dateModified" : "2018-03-28 00:00:00 \x2b0000 UTC",
    "url" : "https:\/\/aalvarez.me\/posts\/custom-file-types-in-netbeans-platform\/",
    "wordCount" : "1184",
    "keywords" : [ "java","netbeans platform","Blog" ]
}
</script>


  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-131322667-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


  <title>Custom File Types in Netbeans Platform &middot; Andrés Álvarez</title>

  
  <link type="text/css" rel="stylesheet" href="https://aalvarez.me/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://aalvarez.me/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://aalvarez.me/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://aalvarez.me/css/hyde.css">
  <link type="text/css" rel="stylesheet" href="https://aalvarez.me/css/extra.css">
  <link type="text/css" rel="stylesheet" href="https://aalvarez.me/css/overrides.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://aalvarez.me/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://aalvarez.me/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Andrés Álvarez" />

  
</head>

  <body class="theme-base-08 ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://aalvarez.me/"><h1>Andrés Álvarez</h1></a>
      <p class="lead">
       Software Engineer &amp; Web Developer 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="https://aalvarez.me/">Home</a> </li>
        <li><a href="https://aalvarez.me/tags/">Tags</a></li>
        <li><a href="https://aalvarez.me/about/"> About Me </a></li><li><a href="https://aalvarez.me/portfolio/"> Portfolio </a></li>
      </ul>
    </nav>

    
    <ul id="social-media" class="list-inline">
      
        <li>
           <a href="mailto:andresalvarez353@gmail.com" target="_blank"><i class="fa fa-envelope fa-2x" title="E-Mail"></i></a>
        </li>
      

      
        <li>
          <a href="https://linkedin.com/in/aalvarez4" target="_blank"><i class="fa fa-linkedin fa-2x" title="LinkedIn"></i></a>
        </li>
      

      
        <li>
          <a href="https://github.com/BigChief45" target="_blank"><i class="fa fa-github fa-2x" title="Github"></i></a>
        </li>
      

      
        <li>
          <a href="https://www.instagram.com/aalvrz_" target="_blank"><i class="fa fa-instagram fa-2x" title="Instagram"></i></a>
        </li>
      

      
        <li>
          <a href="https://aalvarez.me/index.xml" target="_blank"><i class="fa fa-rss fa-2x" title="RSS"></i></a>
        </li>
      
    </ul>

    <p>&copy; 2020. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>Custom File Types in Netbeans Platform</h1>
  <time datetime=2018-03-28T00:00:00Z class="post-date">Wed, Mar 28, 2018</time>

  <p>If your desktop Java application needs to deal with very particular or special kinds of files, we can make use of Netbeans Platform's custom File Type feature to define a file that our application can recognize, and display visual and editing components to view and edit the file's data.</p>
<p>Moreover, we can also make use of Netbeans Platform's <em>Favorites</em> pane, which displays a tree view of a file system, where we can open the special files we need to work with.</p>
<h2 id="creating-a-new-module">Creating a New Module</h2>
<p>For this article, we are going to create a new file type for CSV (Comma Separated Value) files. When we open these files, our application will display a visual representation in the form of an editable JTable.</p>
<p>All this functionaltiy will live in its own Netbeans Platform Module. Meaning that it can be plugged in into different applications in a modular fashion.</p>
<p>We are going to create the module and build it using <a href="https://maven.apache.org/">Maven</a>, since we are also going to be adding some functionalities that depend on external libraries that we can easily include in our project with Maven. But you can also just create the module without Maven as well. To create the module go to <em>New Project &gt; Maven &gt; Netbeans Module</em></p>
<p><img src="https://aalvarez.me/posts/custom-file-types-in-netbeans-platform/maven_netbeans_module.png" alt="New Maven Netbeans Module"></p>
<p>We will name our module <code>CSVFileSupport</code>.Before creating the module, make sure to uncheck the <em>Allow OSGi bundles as dependencies</em> option.</p>
<h3 id="creating-a-new-file-type-csv-file">Creating a New File Type: CSV File</h3>
<p>At this point we have a brand new blank Maven module. To begin creating the new file type, right click on the module and select <em>New &gt; File Type</em> option to start the wizard.</p>
<p>In the wizard's first screen we need to enter the file's <a href="https://en.wikipedia.org/wiki/MIME">MIME Type</a> and a space-separated list of its possible extensions:</p>
<p><img src="https://aalvarez.me/posts/custom-file-types-in-netbeans-platform/csv_file_recognition.png" alt="CSV File Recognition"></p>
<p>Lastly we will use <code>Csv</code> as the class name prefix, select an appropriate icon for the file type, and make sure that the <em>Use MultiView</em> option is checked.</p>
<p>Once the wizard is finished, a <a href="http://wiki.netbeans.org/DevFaqDataObject">DataObject</a> for our file type and a <code>VisualElement</code> file for our file type will be created. Since we do not really need the <em>Source</em> panel in our view, you can go ahead and delete this code from <code>CsvDataObject</code> file:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75af00">@MultiViewElement.Registration</span><span style="color:#f92672">(</span>
            <span style="color:#111">displayName</span> <span style="color:#f92672">=</span> <span style="color:#d88200">&#34;#LBL_Abc_EDITOR&#34;</span><span style="color:#f92672">,</span>
            <span style="color:#111">iconBase</span> <span style="color:#f92672">=</span> <span style="color:#d88200">&#34;com/elibro/csvfilesupport/books.png&#34;</span><span style="color:#f92672">,</span>
            <span style="color:#111">mimeType</span> <span style="color:#f92672">=</span> <span style="color:#d88200">&#34;text/abc&#34;</span><span style="color:#f92672">,</span>
            <span style="color:#111">persistenceType</span> <span style="color:#f92672">=</span> <span style="color:#111">TopComponent</span><span style="color:#f92672">.</span><span style="color:#75af00">PERSISTENCE_ONLY_OPENED</span><span style="color:#f92672">,</span>
            <span style="color:#111">preferredID</span> <span style="color:#f92672">=</span> <span style="color:#d88200">&#34;Abc&#34;</span><span style="color:#f92672">,</span>
            <span style="color:#111">position</span> <span style="color:#f92672">=</span> <span style="color:#111">1000</span>
    <span style="color:#f92672">)</span>
    <span style="color:#75af00">@Messages</span><span style="color:#f92672">(</span><span style="color:#d88200">&#34;LBL_Abc_EDITOR=Source&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#00a8c8">public</span> <span style="color:#00a8c8">static</span> <span style="color:#111">MultiViewEditorElement</span> <span style="color:#75af00">createEditor</span><span style="color:#f92672">(</span><span style="color:#111">Lookup</span> <span style="color:#111">lkp</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">new</span> <span style="color:#111">MultiViewEditorElement</span><span style="color:#f92672">(</span><span style="color:#111">lkp</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
</code></pre></div><p>We can then add this module to a Maven Netbeans Platform application to see it in action. We can use the Favorites pane to browse some CSV files, they should be displayed with the icon we defined:</p>
<p><img src="https://aalvarez.me/posts/custom-file-types-in-netbeans-platform/favorites_csv_files.png" alt="CSV Files in Favorites"></p>
<p>If you open the file and check the <em>Visual</em> pane to the right you will see that it's blank. We will go ahead and add some cool way to represent the data in the CSV file later.</p>
<p>Notice that you can open multiple files using the Favorites explorer. A new pane will be opened for each file. Let's go ahead and set the name of each file in its corresponding pane. Open the <code>CsvVisualElement</code> object and select the <em>Source</em> pane. We are going to create a private variable inside the <code>CsvVisualElement</code> class to store the current file, and then set it in the class's constructor:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#00a8c8">public</span> <span style="color:#00a8c8">final</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">CsvVisualElement</span> <span style="color:#00a8c8">extends</span> <span style="color:#111">JPanel</span> <span style="color:#00a8c8">implements</span> <span style="color:#111">MultiViewElement</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    <span style="color:#00a8c8">private</span> <span style="color:#00a8c8">final</span> <span style="color:#111">File</span> <span style="color:#111">csvFile</span><span style="color:#f92672">;</span>

    <span style="color:#00a8c8">public</span> <span style="color:#75af00">CsvVisualElement</span><span style="color:#f92672">(</span><span style="color:#111">Lookup</span> <span style="color:#111">lkp</span><span style="color:#f92672">)</span> <span style="color:#00a8c8">throws</span> <span style="color:#111">IOException</span> <span style="color:#f92672">{</span>
        <span style="color:#111">obj</span> <span style="color:#f92672">=</span> <span style="color:#111">lkp</span><span style="color:#f92672">.</span><span style="color:#75af00">lookup</span><span style="color:#f92672">(</span><span style="color:#111">CsvDataObject</span><span style="color:#f92672">.</span><span style="color:#75af00">class</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#00a8c8">assert</span> <span style="color:#111">obj</span> <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#00a8c8">null</span><span style="color:#f92672">;</span>
        <span style="color:#111">initComponents</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>

        <span style="color:#111">csvFile</span> <span style="color:#f92672">=</span> <span style="color:#111">FileUtil</span><span style="color:#f92672">.</span><span style="color:#75af00">toFile</span><span style="color:#f92672">(</span><span style="color:#111">lkp</span><span style="color:#f92672">.</span><span style="color:#75af00">lookup</span><span style="color:#f92672">(</span><span style="color:#111">DataObject</span><span style="color:#f92672">.</span><span style="color:#75af00">class</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#75af00">getPrimaryFile</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>We can then set the file's name as the display name in the <code>setMultiViewCallback</code> method of the class:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75af00">@Override</span>
<span style="color:#00a8c8">public</span> <span style="color:#00a8c8">void</span> <span style="color:#75af00">setMultiViewCallback</span><span style="color:#f92672">(</span><span style="color:#111">MultiViewElementCallback</span> <span style="color:#111">callback</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#00a8c8">this</span><span style="color:#f92672">.</span><span style="color:#75af00">callback</span> <span style="color:#f92672">=</span> <span style="color:#111">callback</span><span style="color:#f92672">;</span>
    <span style="color:#111">callback</span><span style="color:#f92672">.</span><span style="color:#75af00">getTopComponent</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#75af00">setDisplayName</span><span style="color:#f92672">(</span><span style="color:#111">csvFile</span><span style="color:#f92672">.</span><span style="color:#75af00">getName</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>And it should look like this:</p>
<p><img src="https://aalvarez.me/posts/custom-file-types-in-netbeans-platform/file_display_name.png" alt="File Display Name"></p>
<h3 id="displaying-the-csv-data">Displaying the CSV Data</h3>
<p>Before we get into the real visual stuff, let's first go ahead and implement the parsing functionality of the file. We will go ahead and create a new Java Class called <code>CSVManager</code> in the same package as the rest of the files. This class will take the file in its constructor, and it will contain many methods that work with the file.</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#00a8c8">public</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">CSVManager</span> <span style="color:#f92672">{</span>

    <span style="color:#00a8c8">private</span> <span style="color:#111">File</span> <span style="color:#111">csvFile</span><span style="color:#f92672">;</span>

    <span style="color:#00a8c8">public</span> <span style="color:#75af00">CSVManager</span><span style="color:#f92672">(</span><span style="color:#111">File</span> <span style="color:#111">file</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#111">csvFile</span> <span style="color:#f92672">=</span> <span style="color:#111">file</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><p>Since we will want to display the data in a table, let's create a method that parses the CSV file and returns a table model of the data. To parse the file we will use the <a href="http://opencsv.sourceforge.net/">OpenCSV</a> library:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#00a8c8">public</span> <span style="color:#111">DefaultTableModel</span> <span style="color:#75af00">CSVToTableModel</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#00a8c8">throws</span> <span style="color:#111">IOException</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// The RFC4180ParserBuilder allows us to parse &#39;\&#39; characters.
</span><span style="color:#75715e"></span>    <span style="color:#111">CSVReader</span> <span style="color:#111">csvReader</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">CSVReaderBuilder</span><span style="color:#f92672">(</span><span style="color:#00a8c8">new</span> <span style="color:#111">FileReader</span><span style="color:#f92672">(</span><span style="color:#111">csvFile</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span>
            <span style="color:#f92672">.</span><span style="color:#75af00">withCSVParser</span><span style="color:#f92672">(</span><span style="color:#00a8c8">new</span> <span style="color:#111">RFC4180ParserBuilder</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#75af00">build</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span>
            <span style="color:#f92672">.</span><span style="color:#75af00">build</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>

    <span style="color:#111">List</span><span style="color:#f92672">&lt;</span><span style="color:#111">String</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span><span style="color:#f92672">&gt;</span> <span style="color:#111">csvData</span> <span style="color:#f92672">=</span> <span style="color:#111">csvReader</span><span style="color:#f92672">.</span><span style="color:#75af00">readAll</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
    <span style="color:#111">Object</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">headers</span> <span style="color:#f92672">=</span> <span style="color:#f92672">(</span><span style="color:#111">String</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span><span style="color:#f92672">)</span> <span style="color:#111">csvData</span><span style="color:#f92672">.</span><span style="color:#75af00">get</span><span style="color:#f92672">(</span><span style="color:#111">0</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
    <span style="color:#111">csvData</span><span style="color:#f92672">.</span><span style="color:#75af00">remove</span><span style="color:#f92672">(</span><span style="color:#111">0</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>

    <span style="color:#111">String</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">rowData</span> <span style="color:#f92672">=</span> <span style="color:#111">csvData</span><span style="color:#f92672">.</span><span style="color:#75af00">toArray</span><span style="color:#f92672">(</span><span style="color:#00a8c8">new</span> <span style="color:#111">String</span><span style="color:#f92672">[</span><span style="color:#111">0</span><span style="color:#f92672">]</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>

    <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">new</span> <span style="color:#111">DefaultTableModel</span><span style="color:#f92672">(</span><span style="color:#111">rowData</span><span style="color:#f92672">,</span> <span style="color:#111">headers</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>=&gt; In the example above we are using a <code>DefaultTableModel</code>, but you will probably want to implement your own custom table model by extending <code>AbstractTableModel</code>.</p>
<p>We can then create class local variables in <code>CsvDataObject</code> to store the manager and the table model, initialize them in the constructor, and create the corresponding getter methods for each:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#00a8c8">public</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">CsvDataObject</span> <span style="color:#00a8c8">extends</span> <span style="color:#111">MultiDataObject</span> <span style="color:#f92672">{</span>
    <span style="color:#00a8c8">private</span> <span style="color:#00a8c8">final</span> <span style="color:#111">CSVManager</span> <span style="color:#111">csvManager</span><span style="color:#f92672">;</span>
    <span style="color:#00a8c8">private</span> <span style="color:#00a8c8">final</span> <span style="color:#111">DefaultTableModel</span> <span style="color:#111">csvTableModel</span><span style="color:#f92672">;</span>

    <span style="color:#00a8c8">public</span> <span style="color:#75af00">CsvDataObject</span><span style="color:#f92672">(</span><span style="color:#111">FileObject</span> <span style="color:#111">pf</span><span style="color:#f92672">,</span> <span style="color:#111">MultiFileLoader</span> <span style="color:#111">loader</span><span style="color:#f92672">)</span> <span style="color:#00a8c8">throws</span> <span style="color:#111">DataObjectExistsException</span><span style="color:#f92672">,</span> <span style="color:#111">IOException</span> <span style="color:#f92672">{</span>
        <span style="color:#00a8c8">super</span><span style="color:#f92672">(</span><span style="color:#111">pf</span><span style="color:#f92672">,</span> <span style="color:#111">loader</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#111">registerEditor</span><span style="color:#f92672">(</span><span style="color:#d88200">&#34;text/csv&#34;</span><span style="color:#f92672">,</span> <span style="color:#00a8c8">true</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>

        <span style="color:#111">csvManager</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">CSVManager</span><span style="color:#f92672">(</span><span style="color:#111">FileUtil</span><span style="color:#f92672">.</span><span style="color:#75af00">toFile</span><span style="color:#f92672">(</span><span style="color:#00a8c8">this</span><span style="color:#f92672">.</span><span style="color:#75af00">getPrimaryFile</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#111">csvTableModel</span> <span style="color:#f92672">=</span> <span style="color:#111">csvManager</span><span style="color:#f92672">.</span><span style="color:#75af00">CSVToTableModel</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#00a8c8">public</span> <span style="color:#111">CSVManager</span> <span style="color:#75af00">getCSVManager</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span>  <span style="color:#f92672">{</span>
        <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">this</span><span style="color:#f92672">.</span><span style="color:#75af00">csvManager</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#00a8c8">public</span> <span style="color:#111">DefaultTableModel</span> <span style="color:#75af00">getTableModel</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">this</span><span style="color:#f92672">.</span><span style="color:#75af00">csvTableModel</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><p>Open the <code>CsvVisualElement</code> file again and in the <em>Design</em> pane, drag a new <code>JScrollPane</code> component into the panel. Then drag a <code>JTable</code> component inside the scroll pane. Now go to the file's source and in the <code>getVisualRepresentation()</code> method we will set the new model to the table:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75af00">@Override</span>
    <span style="color:#00a8c8">public</span> <span style="color:#111">JComponent</span> <span style="color:#75af00">getVisualRepresentation</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#111">dataTable</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">JTable</span><span style="color:#f92672">(</span><span style="color:#111">obj</span><span style="color:#f92672">.</span><span style="color:#75af00">getTableModel</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">this</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
</code></pre></div><p>If we run the application again and select a CSV file that contains actual data, you should see the rendered table with the file's data:</p>
<p><img src="https://aalvarez.me/posts/custom-file-types-in-netbeans-platform/csv_jtable_data.png" alt="CSV Data in Table"></p>
<h3 id="implementing-a-save-feature">Implementing a Save Feature</h3>
<p>We will want to be able to save the contents of the current file that is selected in the editor window. We can make use of Netbeans Platform's <code>Savable</code> interface to easily achieve this. First, make the <code>CsvDataObject</code> class implement the <code>Savable</code> interface:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#00a8c8">public</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">CsvDataObject</span> <span style="color:#00a8c8">extends</span> <span style="color:#111">MultiDataObject</span> <span style="color:#00a8c8">implements</span> <span style="color:#111">Savable</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><p>And lastly add your custom implementation of the <code>save()</code> method. For our CSV example, I am gonna add a method in the <code>CSVManager</code> that writes the data in the table model to the file in CSV format:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#00a8c8">public</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">CSVManager</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>
    <span style="color:#00a8c8">public</span> <span style="color:#00a8c8">void</span> <span style="color:#75af00">TableModelToCSVFile</span><span style="color:#f92672">(</span><span style="color:#111">TableModel</span> <span style="color:#111">tableModel</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#00a8c8">try</span> <span style="color:#f92672">(</span><span style="color:#111">FileWriter</span> <span style="color:#111">fileWriter</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">FileWriter</span><span style="color:#f92672">(</span><span style="color:#111">csvFile</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

            <span style="color:#75715e">// Write the headers
</span><span style="color:#75715e"></span>            <span style="color:#111">List</span><span style="color:#f92672">&lt;</span><span style="color:#111">String</span><span style="color:#f92672">&gt;</span> <span style="color:#111">headers</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">ArrayList</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
            <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">i</span> <span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">;</span> <span style="color:#111">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">tableModel</span><span style="color:#f92672">.</span><span style="color:#75af00">getColumnCount</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span> <span style="color:#111">i</span><span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#111">headers</span><span style="color:#f92672">.</span><span style="color:#75af00">add</span><span style="color:#f92672">(</span><span style="color:#111">tableModel</span><span style="color:#f92672">.</span><span style="color:#75af00">getColumnName</span><span style="color:#f92672">(</span><span style="color:#111">i</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>

            <span style="color:#111">fileWriter</span><span style="color:#f92672">.</span><span style="color:#75af00">write</span><span style="color:#f92672">(</span><span style="color:#111">String</span><span style="color:#f92672">.</span><span style="color:#75af00">join</span><span style="color:#f92672">(</span><span style="color:#d88200">&#34;,&#34;</span><span style="color:#f92672">,</span> <span style="color:#111">headers</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
            <span style="color:#111">fileWriter</span><span style="color:#f92672">.</span><span style="color:#75af00">write</span><span style="color:#f92672">(</span><span style="color:#d88200">&#34;\n&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>

            <span style="color:#75715e">// Write the data
</span><span style="color:#75715e"></span>            <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">i</span> <span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">;</span> <span style="color:#111">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">tableModel</span><span style="color:#f92672">.</span><span style="color:#75af00">getRowCount</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span> <span style="color:#111">i</span><span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#111">List</span><span style="color:#f92672">&lt;</span><span style="color:#111">String</span><span style="color:#f92672">&gt;</span> <span style="color:#111">row</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">ArrayList</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">j</span> <span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">;</span> <span style="color:#111">j</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">tableModel</span><span style="color:#f92672">.</span><span style="color:#75af00">getColumnCount</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span> <span style="color:#111">j</span><span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    <span style="color:#111">Object</span> <span style="color:#111">val</span> <span style="color:#f92672">=</span> <span style="color:#111">tableModel</span><span style="color:#f92672">.</span><span style="color:#75af00">getValueAt</span><span style="color:#f92672">(</span><span style="color:#111">i</span><span style="color:#f92672">,</span> <span style="color:#111">j</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>

                    <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">val</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#00a8c8">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                        <span style="color:#111">row</span><span style="color:#f92672">.</span><span style="color:#75af00">add</span><span style="color:#f92672">(</span><span style="color:#d88200">&#34;&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                    <span style="color:#f92672">}</span>
                    <span style="color:#00a8c8">else</span> <span style="color:#f92672">{</span>
                        <span style="color:#111">row</span><span style="color:#f92672">.</span><span style="color:#75af00">add</span><span style="color:#f92672">(</span><span style="color:#111">tableModel</span><span style="color:#f92672">.</span><span style="color:#75af00">getValueAt</span><span style="color:#f92672">(</span><span style="color:#111">i</span><span style="color:#f92672">,</span> <span style="color:#111">j</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#75af00">toString</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                    <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
                <span style="color:#111">fileWriter</span><span style="color:#f92672">.</span><span style="color:#75af00">write</span><span style="color:#f92672">(</span><span style="color:#111">String</span><span style="color:#f92672">.</span><span style="color:#75af00">join</span><span style="color:#f92672">(</span><span style="color:#d88200">&#34;,&#34;</span><span style="color:#f92672">,</span> <span style="color:#111">row</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#111">fileWriter</span><span style="color:#f92672">.</span><span style="color:#75af00">write</span><span style="color:#f92672">(</span><span style="color:#d88200">&#34;\n&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#00a8c8">catch</span> <span style="color:#f92672">(</span><span style="color:#111">IOException</span> <span style="color:#111">e</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#111">System</span><span style="color:#f92672">.</span><span style="color:#75af00">err</span><span style="color:#f92672">.</span><span style="color:#75af00">println</span><span style="color:#f92672">(</span><span style="color:#111">e</span><span style="color:#f92672">.</span><span style="color:#75af00">getMessage</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>And then we can use that in the <code>save()</code> method of <code>CsvDataObject</code>:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75af00">@Override</span>
<span style="color:#00a8c8">public</span> <span style="color:#00a8c8">void</span> <span style="color:#75af00">save</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#00a8c8">throws</span> <span style="color:#111">IOException</span> <span style="color:#f92672">{</span>
    <span style="color:#00a8c8">this</span><span style="color:#f92672">.</span><span style="color:#75af00">csvManager</span><span style="color:#f92672">.</span><span style="color:#75af00">TableModelToCSVFile</span><span style="color:#f92672">(</span><span style="color:#00a8c8">this</span><span style="color:#f92672">.</span><span style="color:#75af00">csvTableModel</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="references">References</h2>
<ul>
<li><a href="https://www.youtube.com/embed/rKL_dShhbkA">https://www.youtube.com/embed/rKL_dShhbkA</a></li>
<li><a href="https://platform.netbeans.org/tutorials/nbm-filetype.html">https://platform.netbeans.org/tutorials/nbm-filetype.html</a></li>
<li><a href="https://stackoverflow.com/questions/24554753/how-do-i-handle-file-saves-properly-in-netbeans-platform-project-plugin">https://stackoverflow.com/questions/24554753/how-do-i-handle-file-saves-properly-in-netbeans-platform-project-plugin</a></li>
<li><a href="https://platform.netbeans.org/tutorials/nbm-porting-basic.html">https://platform.netbeans.org/tutorials/nbm-porting-basic.html</a></li>
</ul>
</div>


<div style="margin: 20px 0px;">
  
    <a href="https://aalvarez.me/tags/java" class="label label-default">java</a></li>
  
    <a href="https://aalvarez.me/tags/netbeans-platform" class="label label-default">netbeans platform</a></li>
  
</div>


<h2>Comments</h2>
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "aalvarez-blog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </main>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-131322667-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </body>
</html>

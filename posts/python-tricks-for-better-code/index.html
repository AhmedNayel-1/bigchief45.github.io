<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="//gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.52" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Python Tricks for Better Code &middot; Andrés Álvarez</title>

  
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/poole.css">
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/hyde.css">
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/extra.css">
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/overrides.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Andrés Álvarez" />

  
</head>

  <body class="theme-base-08 ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="http://aalvarez.me/"><h1>Andrés Álvarez</h1></a>
      <p class="lead">
       Software Engineer &amp; Web Developer 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="http://aalvarez.me/">Home</a> </li>
        <li><a href="/tags/">Tags</a></li>
        <li><a href="/about/"> About Me </a></li><li><a href="/portfolio/"> Portfolio </a></li>
      </ul>
    </nav>

    
    <ul id="social-media" class="list-inline">
      
        <li>
           <a href="mailto:andresalvarez353@gmail.com" target="_blank"><i class="fa fa-envelope fa-2x" title="E-Mail"></i></a>
        </li>
      

      
        <li>
          <a href="https://linkedin.com/in/aalvarez4" target="_blank"><i class="fa fa-linkedin fa-2x" title="LinkedIn"></i></a>
        </li>
      

      
        <li>
          <a href="https://github.com/BigChief45" target="_blank"><i class="fa fa-github fa-2x" title="Github"></i></a>
        </li>
      

      
        <li>
          <a href="https://www.instagram.com/aalvarez300" target="_blank"><i class="fa fa-instagram fa-2x" title="Instagram"></i></a>
        </li>
      

      
        <li>
          <a href="/index.xml" target="_blank"><i class="fa fa-rss fa-2x" title="RSS"></i></a>
        </li>
      
    </ul>

    <p>&copy; 2018. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>Python Tricks for Better Code</h1>
  <time datetime=2017-03-08T00:00:00Z class="post-date">Wed, Mar 8, 2017</time>

  <p>A compilation of very useful Python tricks for better code. All examples are Python 2.7 and Python 3 compatible unless stated otherwise.</p>

<h2 id="enumerate">Enumerate</h2>

<p>When working with items in a list and we want to print or handle each item&rsquo;s index, instead of using a counter variable:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#888"># Bad way</span>
i <span style="color:#333">=</span> <span style="color:#00d;font-weight:bold">0</span>
<span style="color:#080;font-weight:bold">for</span> place <span style="color:#000;font-weight:bold">in</span> places:
    <span style="color:#080;font-weight:bold">print</span>(i, place)
    i <span style="color:#333">+=</span> <span style="color:#00d;font-weight:bold">1</span></code></pre></div>
<p>We can use <code>enumerate</code> to improve our code:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#080;font-weight:bold">for</span> i, place <span style="color:#000;font-weight:bold">in</span> <span style="color:#007020">enumerate</span>(places):
    <span style="color:#080;font-weight:bold">print</span>(i, place)</code></pre></div>
<p><code>enumerate</code> returns a list of indexes along with each item in the list.</p>

<h2 id="using-zip">Using zip</h2>

<p>Sometimes it happens that we have two different lists and we want to iterate through <strong>both</strong> of these two lists <strong>at the same time</strong>. An ugly approach to this situation is  to obtain the length of one of the lists first and then iterate through one of them, while handling the other list inside the loop:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#888"># Bad way</span>
list_1 <span style="color:#333">=</span> [<span style="background-color:#fff0f0">&#39;123&#39;</span>, <span style="background-color:#fff0f0">&#39;KSQR&#39;</span>, <span style="background-color:#fff0f0">&#39;12GKAL&#39;</span>]
list_2 <span style="color:#333">=</span> [<span style="background-color:#fff0f0">&#39;65DD&#39;</span>, <span style="background-color:#fff0f0">&#39;12DD&#39;</span>, <span style="background-color:#fff0f0">&#39;123HGH&#39;</span>]

<span style="color:#080;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#007020">range</span>(<span style="color:#007020">len</span>(list_1)):
    a <span style="color:#333">=</span> list_1[i]
    b <span style="color:#333">=</span> list_2[i]
    <span style="color:#080;font-weight:bold">print</span>(a, b)</code></pre></div>
<p>Instead, we can use <code>zip</code> for more concise and better looking code:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#080;font-weight:bold">for</span> a, b <span style="color:#000;font-weight:bold">in</span> <span style="color:#007020">zip</span>(list_1, list_2):
    <span style="color:#080;font-weight:bold">print</span>(a, b)</code></pre></div>
<p><code>zip</code> will take two or more lists and zip them together. This means that the resulting list will have pairs of each item from each list as a single item.</p>

<h2 id="swapping-variable-values">Swapping Variable Values</h2>

<p>When we want to swap the values between two variables, a common and unpractical approach is to create a third temporary variable to help with the swapping:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a <span style="color:#333">=</span> <span style="color:#00d;font-weight:bold">5</span>
b <span style="color:#333">=</span> <span style="color:#333">-</span><span style="color:#00d;font-weight:bold">5</span>

<span style="color:#888"># Bad way</span>
tmp <span style="color:#333">=</span> a
a <span style="color:#333">=</span> b
b <span style="color:#333">=</span> tmp</code></pre></div>
<p>We can improve this by using a technique called <strong>tuple unpacking</strong>:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a, b <span style="color:#333">=</span> b, a</code></pre></div>
<h2 id="default-dictionary-values">Default Dictionary Values</h2>

<p>When trying to obtain a value from a dictionary, is necessary to check first if the dictionary already has the key we are using to obtain the value, otherwise we will get a <code>KeyError</code> error.</p>

<p>Usually checks like these are done like this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#888"># Bad way</span>
<span style="color:#080;font-weight:bold">if</span> <span style="background-color:#fff0f0">&#39;John&#39;</span> <span style="color:#000;font-weight:bold">in</span> salaries:
    salary_john <span style="color:#333">=</span> salaries[<span style="background-color:#fff0f0">&#39;John&#39;</span>]</code></pre></div>
<p>However there is a better way using a dictionary&rsquo;s <code>get</code> function:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">salary_john <span style="color:#333">=</span> salaries<span style="color:#333">.</span>get(<span style="background-color:#fff0f0">&#39;John&#39;</span>, <span style="color:#00d;font-weight:bold">0</span>)</code></pre></div>
<p>With the <code>get</code> function we can immediately get the value for the <code>'John'</code> key if it exists, while also providing a fallback value of <code>0</code> if the key is not in the dictionary.</p>

<h2 id="for-else">For &hellip; else</h2>

<p>Python <code>for</code> loops have a very useful <code>else</code> statement. In the context of loops in Python, the <code>else</code> statement means that if no break occurs, the code inside the <code>else</code> will be executed.</p>

<p>The main use case for this behaviour is to implement search loops, where you’re performing a search for an item that meets a particular condition, and need to perform additional processing or raise an informative error if no acceptable value is found:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#080;font-weight:bold">for</span> x <span style="color:#000;font-weight:bold">in</span> data:
    <span style="color:#080;font-weight:bold">if</span> acceptable(x):
        <span style="color:#080;font-weight:bold">break</span>
<span style="color:#080;font-weight:bold">else</span>:
    <span style="color:#080;font-weight:bold">raise</span> <span style="color:#f00;font-weight:bold">ValueError</span>(<span style="background-color:#fff0f0">&#34;No acceptable value in {!r:100}&#34;</span><span style="color:#333">.</span>format(data))

    <span style="color:#888"># Continue calculations with x</span></code></pre></div>
<h2 id="file-reading">File Reading</h2>

<p>When opening files, it is very common to see a variable assigned with <code>open()</code> and reading the contents with another assignment and <code>read()</code>:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#888"># Bad way</span>
f <span style="color:#333">=</span> <span style="color:#007020">open</span>(<span style="background-color:#fff0f0">&#39;todo.txt&#39;</span>)
content <span style="color:#333">=</span> f<span style="color:#333">.</span>read()

<span style="color:#080;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> content<span style="color:#333">.</span>split(<span style="background-color:#fff0f0">&#39;</span><span style="color:#666;background-color:#fff0f0;font-weight:bold">\n</span><span style="background-color:#fff0f0">&#39;</span>):
    <span style="color:#080;font-weight:bold">print</span>(line)

f<span style="color:#333">.</span>close()</code></pre></div>
<p>A better way is to use the <code>with</code> statement. The file object also adds support for iteration for more concise code:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#080;font-weight:bold">with</span> <span style="color:#007020">open</span>(<span style="background-color:#fff0f0">&#39;todo.txt&#39;</span>) <span style="color:#080;font-weight:bold">as</span> f:
  <span style="color:#080;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> f:
    <span style="color:#080;font-weight:bold">print</span> line</code></pre></div>
<p>Everything that is inside the <code>with</code> &ldquo;block&rdquo; will be executed while the file is open. When this is finished, the file will be closed automatically.</p>

<h2 id="list-comprehensions">List Comprehensions</h2>

<p>List comprehensions allow us to define a list&rsquo;s contents in-line without its declaration. Here is an example <strong>without</strong> using list comprehension:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#007020">list</span> <span style="color:#333">=</span> []
<span style="color:#080;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> (<span style="color:#00d;font-weight:bold">1</span>, <span style="color:#00d;font-weight:bold">2</span>, <span style="color:#00d;font-weight:bold">3</span>):
    <span style="color:#007020">list</span><span style="color:#333">.</span>append(i)</code></pre></div>
<p>And here is the same example using a list comprehension:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#007020">list</span> <span style="color:#333">=</span> [i <span style="color:#080;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> (<span style="color:#00d;font-weight:bold">1</span>, <span style="color:#00d;font-weight:bold">2</span>, <span style="color:#00d;font-weight:bold">3</span>)]</code></pre></div>
<p>Neat! We can use multiple <code>for</code> statements together and <code>if</code> statements to filter out items. Using list comprehensions instead of <code>for</code> loops is a nice way to quickly define lists.</p>

<h2 id="advanced-unpacking">Advanced Unpacking</h2>

<p>Similar to the tuple unpacking trick shown before, in Python 2 we can use advanced unpacking in the following way:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a, b <span style="color:#333">=</span> <span style="color:#007020">range</span>(<span style="color:#00d;font-weight:bold">2</span>)
<span style="color:#888"># a =&gt; 0</span>
<span style="color:#888"># b =&gt; 1</span></code></pre></div>
<p>With <strong>Python 3</strong> we can also obtain the remainder of the sequence. We can actually obtain the remainder from anywhere in the list:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a, <span style="color:#333">*</span>rest, b <span style="color:#333">=</span> <span style="color:#007020">range</span>(<span style="color:#00d;font-weight:bold">10</span>)
<span style="color:#888"># a =&gt; 0</span>
<span style="color:#888"># *rest =&gt; [2, 3, 4, 5, 6, 7, 8, 9]</span>
<span style="color:#888"># b =&gt; 10</span>

a, <span style="color:#333">*</span>rest, b <span style="color:#333">=</span> <span style="color:#007020">range</span>(<span style="color:#00d;font-weight:bold">10</span>)
<span style="color:#888"># a =&gt; 0</span>
<span style="color:#888"># b =&gt; 9</span>
<span style="color:#888"># rest =&gt; [1, 2, 3, 4, 5, 6, 7, 8]</span></code></pre></div>
<h2 id="enum-classes">Enum Classes</h2>

<p>Enumerated types were added to the standard library in <strong>Python 3.4+</strong>, allowing us to do the following:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#080;font-weight:bold">from</span> <span style="color:#0e84b5;font-weight:bold">enum</span> <span style="color:#080;font-weight:bold">import</span> Enum

<span style="color:#080;font-weight:bold">class</span> <span style="color:#b06;font-weight:bold">Color</span>(Enum):
    red <span style="color:#333">=</span> <span style="color:#00d;font-weight:bold">1</span>
    blue <span style="color:#333">=</span> <span style="color:#00d;font-weight:bold">2</span>
    green <span style="color:#333">=</span> <span style="color:#00d;font-weight:bold">3</span>

red <span style="color:#333">=</span> Color<span style="color:#333">.</span>red</code></pre></div>
<h2 id="references">References</h2>

<ol>
<li><a href="https://www.youtube.com/watch?v=VBokjWj_cEA">7 Simple Tricks to Write Better Python Code - Sebastiaan Mathôt</a></li>
<li><a href="http://python-notes.curiousefficiency.org/en/latest/python_concepts/break_else.html">Else Clauses on Loop Statements</a></li>
<li><a href="https://thehackerguidetopython.com/">The Hacker&rsquo;s Guide to Python by Julien Danjou</a></li>
<li><a href="http://www.asmeurer.com/python3-presentation/slides.html#1">10 awesome features of Python that you can&rsquo;t use because you refuse to upgrade to Python 3</a></li>
</ol>
</div>


<div style="margin: 20px 0px;">
  
    <a href="http://aalvarez.me/tags/python" class="label label-default">python</a></li>
  
    <a href="http://aalvarez.me/tags/programming" class="label label-default">programming</a></li>
  
</div>


<h2>Comments</h2>
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "aalvarez-blog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </main>

    
  </body>
</html>

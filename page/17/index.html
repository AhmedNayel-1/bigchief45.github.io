<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="//gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.52" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Andrés Álvarez</title>

  
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/poole.css">
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/hyde.css">
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/extra.css">
  <link type="text/css" rel="stylesheet" href="http://aalvarez.me/css/overrides.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="http://aalvarez.me/index.xml" rel="alternate" type="application/rss+xml" title="Andrés Álvarez" />

  
</head>

  <body class="theme-base-08 ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="http://aalvarez.me/"><h1>Andrés Álvarez</h1></a>
      <p class="lead">
       Software Engineer &amp; Web Developer 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="http://aalvarez.me/">Home</a> </li>
        <li><a href="/tags/">Tags</a></li>
        <li><a href="/about/"> About Me </a></li><li><a href="/portfolio/"> Portfolio </a></li>
      </ul>
    </nav>

    
    <ul id="social-media" class="list-inline">
      
        <li>
           <a href="mailto:andresalvarez353@gmail.com" target="_blank"><i class="fa fa-envelope fa-2x" title="E-Mail"></i></a>
        </li>
      

      
        <li>
          <a href="https://linkedin.com/in/aalvarez4" target="_blank"><i class="fa fa-linkedin fa-2x" title="LinkedIn"></i></a>
        </li>
      

      
        <li>
          <a href="https://github.com/BigChief45" target="_blank"><i class="fa fa-github fa-2x" title="Github"></i></a>
        </li>
      

      
        <li>
          <a href="https://www.instagram.com/aalvarez300" target="_blank"><i class="fa fa-instagram fa-2x" title="Instagram"></i></a>
        </li>
      

      
        <li>
          <a href="/index.xml" target="_blank"><i class="fa fa-rss fa-2x" title="RSS"></i></a>
        </li>
      
    </ul>

    <p>&copy; 2018. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="posts">

<article class="post">
  <h1 class="post-title">
    <a href="http://aalvarez.me/posts/ruby-benchmarking-and-big-o-notation/">Ruby Benchmarking &amp; Big O Notation</a>
  </h1>
  <time datetime="2016-11-15T00:00:00Z" class="post-date">Tue, Nov 15, 2016</time>
  <p>The Ruby <a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/benchmark/rdoc/Benchmark.html">Benchmark</a> library helps us to measure how long it takes for a block of code to run. Similar to when you subtract starting time and ending time in other languages such as Java.</p>

<p>I was doing some <a href="https://en.wikipedia.org/wiki/Big_O_notation">Big O Notation</a> reviewing with Ruby the other day and did some common algorithm implementations for each of the most common Big O notations, just for fun.</p>

<h2 id="using-benchmark">Using Benchmark</h2>

<p>To start benchmarking our code, we simply need to require <code>benchmark</code> and use the methods provided by the <code>Benchmark</code> module. For me, the most practical way is to use <code>Benchmark#bm</code> method, where we pass a block of code we want to measure:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#007020">require</span> <span style="background-color:#fff0f0">&#39;benchmark&#39;</span>

<span style="color:#036;font-weight:bold">Benchmark</span><span style="color:#333">.</span>bm <span style="color:#080;font-weight:bold">do</span> <span style="color:#333">|</span>x<span style="color:#333">|</span>
  x<span style="color:#333">.</span>report <span style="color:#080;font-weight:bold">do</span>
    <span style="color:#888"># our code here</span>
  <span style="color:#080;font-weight:bold">end</span>

<span style="color:#080;font-weight:bold">end</span></code></pre></div>
<p>Inside the block we are using the <code>report</code> method of the block&rsquo;s variable, which will basically do a separate benchmark for each report.</p>

<p>However, we can improve this even more by adding a label to <code>report</code> and a label width to <code>bm</code>:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#007020">require</span> <span style="background-color:#fff0f0">&#39;benchmark&#39;</span>

<span style="color:#036;font-weight:bold">Benchmark</span><span style="color:#333">.</span>bm(<span style="color:#00d;font-weight:bold">20</span>) <span style="color:#080;font-weight:bold">do</span> <span style="color:#333">|</span>x<span style="color:#333">|</span>
  x<span style="color:#333">.</span>report(<span style="background-color:#fff0f0">&#34;my_algorithm&#34;</span>) <span style="color:#080;font-weight:bold">do</span>
    <span style="color:#888"># our code here</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span></code></pre></div>
<p>Let&rsquo;s see it in action with some common algorithms.</p>

  
  <div style="margin: 20px 0px;">
  
    <a href="http://aalvarez.me/tags/ruby" class="label label-default">ruby</a></li>
  
    <a href="http://aalvarez.me/tags/algorithms" class="label label-default">algorithms</a></li>
  
    <a href="http://aalvarez.me/tags/programming" class="label label-default">programming</a></li>
  
    <a href="http://aalvarez.me/tags/benchmarking" class="label label-default">benchmarking</a></li>
  
    <a href="http://aalvarez.me/tags/mathematics" class="label label-default">mathematics</a></li>
  
    <a href="http://aalvarez.me/tags/computerscience" class="label label-default">computerscience</a></li>
  
</div>


  
    <div class="read-more-link">
      <a href="/posts/ruby-benchmarking-and-big-o-notation/">Read More…</a>
    </div>
  
</article>
<article class="post">
  <h1 class="post-title">
    <a href="http://aalvarez.me/posts/infinite-sequences-in-ruby-using-enumerator/">Infinite Sequences in Ruby Using Enumerator</a>
  </h1>
  <time datetime="2016-11-14T00:00:00Z" class="post-date">Mon, Nov 14, 2016</time>
  <p>The <a href="http://ruby-doc.org/core-2.3.1/Enumerator.html">Enumerator</a> class in Ruby allows us to generate some very smooth and useful infinite sequences. For example, in some <a href="https://projecteuler.net/">Project Euler</a> problems it is required to generate sequences without a specific limit. A good example of this is the <em>Highly Divisible Triangular Number</em> problem:</p>

<pre><code>The sequence of triangle numbers is generated by adding the natural numbers. So the 7th triangle number would be 1 + 2 + 3 + 4 + 5 + 6 + 7 = 28. The first ten terms would be:

1, 3, 6, 10, 15, 21, 28, 36, 45, 55, ...

Let us list the factors of the first seven triangle numbers:

     1: 1
     3: 1,3
     6: 1,2,3,6
    10: 1,2,5,10
    15: 1,3,5,15
    21: 1,3,7,21
    28: 1,2,4,7,14,28

We can see that 28 is the first triangle number to have over five divisors.

What is the value of the first triangle number to have over five hundred divisors?
</code></pre>

<p>So first we would want to be able to generate a (infinite) sequence of <a href="https://en.wikipedia.org/wiki/Triangular_number">triangular numbers</a> that we can use to do many programming operations, such as iterating over the sequence.</p>

  
  <div style="margin: 20px 0px;">
  
    <a href="http://aalvarez.me/tags/ruby" class="label label-default">ruby</a></li>
  
    <a href="http://aalvarez.me/tags/algorithms" class="label label-default">algorithms</a></li>
  
    <a href="http://aalvarez.me/tags/project-euler" class="label label-default">project euler</a></li>
  
    <a href="http://aalvarez.me/tags/programming" class="label label-default">programming</a></li>
  
    <a href="http://aalvarez.me/tags/mathematics" class="label label-default">mathematics</a></li>
  
</div>


  
    <div class="read-more-link">
      <a href="/posts/infinite-sequences-in-ruby-using-enumerator/">Read More…</a>
    </div>
  
</article>
<article class="post">
  <h1 class="post-title">
    <a href="http://aalvarez.me/posts/modifying-the-zenoss-infrastructure-grid/">Modifying the Zenoss Infrastructure Grid</a>
  </h1>
  <time datetime="2016-11-10T00:00:00Z" class="post-date">Thu, Nov 10, 2016</time>
  <p>Continuing from my previous post, where I explained <a href="/posts/modifying-the-zenoss-device-detail-bar.html">how to modify the device detail bar from a ZenPack using ExtJS</a>, in this post I will explain how we can modify the device list grid shown in the infrastructure page.</p>

<h2 id="the-infrastructure-grid">The Infrastructure Grid</h2>

<p>This is the table in the infrastructure page that shows all devices being monitored by Zenoss. Default columns include <em>device name</em>, <em>device class</em>, <em>IP address</em>, <em>production state</em>, and <em>events</em>, as shown in the image below:</p>

<p><img src="/posts/modifying-the-zenoss-infrastructure-grid/zenoss_device_grid.png" alt="Zenoss Infrastructure Grid" /></p>

<p>However it would be nice to also include the power status we added to the device detail bar in the previous post, maybe even add the ping status as well (why Zenoss doesn&rsquo;t do this by default is beyond me).</p>

<h2 id="devicepanels-js">DevicePanels.js</h2>

<p>The source code for the grid is found in <code>$ZENHOME/Products/ZenUI/browser/resources/js/zenoss/DevicePanels.js</code>. A quick glance at it and you will quickly find the definitions of the columns I mentioned earlier, defined in an array called <code>deviceColumns</code>.</p>

  
  <div style="margin: 20px 0px;">
  
    <a href="http://aalvarez.me/tags/zenoss" class="label label-default">zenoss</a></li>
  
    <a href="http://aalvarez.me/tags/extjs" class="label label-default">extjs</a></li>
  
    <a href="http://aalvarez.me/tags/monitoring" class="label label-default">monitoring</a></li>
  
    <a href="http://aalvarez.me/tags/javascript" class="label label-default">javascript</a></li>
  
    <a href="http://aalvarez.me/tags/ui" class="label label-default">ui</a></li>
  
    <a href="http://aalvarez.me/tags/zenpacks" class="label label-default">zenpacks</a></li>
  
    <a href="http://aalvarez.me/tags/sysadmin" class="label label-default">sysadmin</a></li>
  
</div>


  
    <div class="read-more-link">
      <a href="/posts/modifying-the-zenoss-infrastructure-grid/">Read More…</a>
    </div>
  
</article>
<article class="post">
  <h1 class="post-title">
    <a href="http://aalvarez.me/posts/modifying-the-zenoss-device-detail-bar/">Modifying the Zenoss Device Detail Bar</a>
  </h1>
  <time datetime="2016-11-08T00:00:00Z" class="post-date">Tue, Nov 8, 2016</time>
  <p>The Zenoss Core <a href="https://www.sencha.com/products/extjs/"><strong>ExtJS</strong></a> graphic user interface is divided into many different components. In this post I will go over on how we can modify the device detail bar to display additional custom information for devices, by creating a custom ZenPack.</p>

<p>Zenoss Core 4 uses ExtJS 4 JavaScript framework to manage all the user interface components. These components can be found in <code>$ZENHOME/Products/ZenUI3/browser/resources/js/zenoss</code>, and as you would expect, the device detail bar component is also located there.</p>

<h2 id="the-device-detail-bar">The Device Detail Bar</h2>

<p>This is the detail bar located on the device view page which shows the device&rsquo;s icon, name, events, status, production state, and priority. The JavaScript source code for this component can be found in <code>DeviceDetailBar.js</code></p>

<p><img src="/posts/modifying-the-zenoss-device-detail-bar/device_detail_bar.png" alt="Device Detail Bar" /></p>

<p>However since we are going to <strong><em>extend</em></strong> this component through a ZenPack, we will not modify that source. Instead, we will add new code to use ExtJS to add our custom data displays.</p>

<h2 id="extending-the-component-through-zenpacks">Extending The Component, Through ZenPacks</h2>

<p>Let&rsquo;s assume we are starting with a freshly created ZenPack, which adds a new <code>power_status</code> integer field to certain devices, according to its <code>zenpack.yaml</code> file:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#888"># ...</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span>classes:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>CustomDevice:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>base:<span style="color:#bbb"> </span>[zenpacklib.Device]<span style="color:#bbb">
</span><span style="color:#bbb">    </span>label:<span style="color:#bbb"> </span>Custom<span style="color:#bbb"> </span>Device<span style="color:#bbb">
</span><span style="color:#bbb">    </span>properties:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>power_status:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>type:<span style="color:#bbb"> </span>boolean</code></pre></div>
<p>What we want is to display this value in the device&rsquo;s detail bar, similar to the device&rsquo;s ping status display.</p>

  
  <div style="margin: 20px 0px;">
  
    <a href="http://aalvarez.me/tags/zenoss" class="label label-default">zenoss</a></li>
  
    <a href="http://aalvarez.me/tags/extjs" class="label label-default">extjs</a></li>
  
    <a href="http://aalvarez.me/tags/monitoring" class="label label-default">monitoring</a></li>
  
    <a href="http://aalvarez.me/tags/javascript" class="label label-default">javascript</a></li>
  
    <a href="http://aalvarez.me/tags/ui" class="label label-default">ui</a></li>
  
    <a href="http://aalvarez.me/tags/zenpacks" class="label label-default">zenpacks</a></li>
  
    <a href="http://aalvarez.me/tags/sysadmin" class="label label-default">sysadmin</a></li>
  
</div>


  
    <div class="read-more-link">
      <a href="/posts/modifying-the-zenoss-device-detail-bar/">Read More…</a>
    </div>
  
</article>
<article class="post">
  <h1 class="post-title">
    <a href="http://aalvarez.me/posts/creating-zenoss-zenpack-daemons/">Creating Zenoss ZenPack Daemons</a>
  </h1>
  <time datetime="2016-11-07T00:00:00Z" class="post-date">Mon, Nov 7, 2016</time>
  <p>ZenPacks are powerful custom add-ons that can help us extend Zenoss&rsquo;s functionality. In this post I will go over on how to create a ZenPack that adds a custom daemon to the existing Zenoss daemons and runs on a configured cycle time to perform custom tasks. We will achieve this by creating the ZenPack using <a href="http://zenpacklib.zenoss.com/en/latest/index.html"><strong>zenpacklib</strong></a>, but it is also possible to create it from the Zenoss user interface.</p>

<h2 id="about-zenpacklib">About zenpacklib</h2>

<p><strong>zenpacklib</strong> is a Python library developed by the Zenoss team to facilitate the process of creating ZenPacks, specially ZenPacks that deal with modeling and monitoring devices and components. Most of the newer ZenPacks that are being released are now being built with zenpacklib.</p>

<p>We can obtain zenpacklib by running the following commands:</p>

<pre><code>wget http://zenpacklib.zenoss.com/zenpacklib.py
chmod 755 zenpacklib.py
</code></pre>

<p>This will download the zenpacklib Python library and give it executable permissions.</p>

<h2 id="creating-the-zenpack">Creating the ZenPack</h2>

<p>Using the zenpacklib file we just downloaded, we proceed to create a new fresh ZenPack:</p>

<pre><code>./zenpacklib.py create ZenPacks.&lt;your_namespace&gt;.&lt;zenpack_name&gt;
</code></pre>

<p>This will create the ZenPack base directory with the necessary base files.</p>

<p>Now we go into this directory to begin.</p>

<pre><code>cd ZenPacks.&lt;your_namespace&gt;.&lt;zenpack_name&gt;
</code></pre>

<h2 id="creating-the-zenpack-daemon">Creating the ZenPack Daemon</h2>

<p>Our custom daemon declaration will be located in a directory named <code>daemons</code>, inside our ZenPack directory:</p>

<pre><code>mkdir ZenPacks.&lt;your_namespace&gt;.&lt;zenpack_name&gt;/&lt;your_namespace&gt;/&lt;zenpack_name&gt;/daemons
</code></pre>

<p>Here we will create a new Bashscript file with the name of our daemon. In this case we will name it <code>mydaemon</code>:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#579">#! /usr/bin/env bash
</span><span style="color:#579"></span>
<span style="color:#963">DAEMON_NAME</span><span style="color:#333">=</span><span style="background-color:#fff0f0">&#34;mydaemon&#34;</span>

. <span style="color:#963">$ZENHOME</span>/bin/zenfunctions

<span style="color:#963">MYPATH</span><span style="color:#333">=</span><span style="background-color:#fff0f0">`</span>python -c <span style="background-color:#fff0f0">&#34;import os.path; print os.path.realpath(&#39;</span><span style="color:#963">$0</span><span style="background-color:#fff0f0">&#39;)&#34;</span><span style="background-color:#fff0f0">`</span> <span style="color:#963">THISDIR</span><span style="color:#333">=</span><span style="background-color:#fff0f0">`</span>dirname <span style="color:#963">$MYPATH</span><span style="background-color:#fff0f0">`</span> <span style="color:#963">PRGHOME</span><span style="color:#333">=</span><span style="background-color:#fff0f0">`</span>dirname <span style="color:#963">$THISDIR</span><span style="background-color:#fff0f0">`</span> <span style="color:#963">PRGNAME</span><span style="color:#333">=</span><span style="color:#963">$DAEMON_NAME</span>.py <span style="color:#963">CFGFILE</span><span style="color:#333">=</span><span style="color:#963">$CFGDIR</span>/<span style="color:#963">$DAEMON_NAME</span>.conf

generic <span style="background-color:#fff0f0">&#34;</span><span style="color:#963">$@</span><span style="background-color:#fff0f0">&#34;</span></code></pre></div>
<p>Once the ZenPack is installed, files under this <code>daemons</code> directory will become executable (<code>chmod 0755</code>), a symlink to the file will be created in <code>$ZENHOME/bin</code>, and a configuration file will be generated in <code>$ZENHOME/etc/&lt;daemon_name&gt;.conf</code></p>

<p><strong>NOTE:</strong> If you created your ZenPack using the Zenoss user interface, the <code>daemons</code> directory will also be automatically created, and will contain an example daemon file named <code>zenexample</code> with code similar to the one above. In this case you should simply replace the necessary values.</p>

  
  <div style="margin: 20px 0px;">
  
    <a href="http://aalvarez.me/tags/zenoss" class="label label-default">zenoss</a></li>
  
    <a href="http://aalvarez.me/tags/zenpacks" class="label label-default">zenpacks</a></li>
  
    <a href="http://aalvarez.me/tags/daemons" class="label label-default">daemons</a></li>
  
    <a href="http://aalvarez.me/tags/monitoring" class="label label-default">monitoring</a></li>
  
    <a href="http://aalvarez.me/tags/python" class="label label-default">python</a></li>
  
    <a href="http://aalvarez.me/tags/devops" class="label label-default">devops</a></li>
  
    <a href="http://aalvarez.me/tags/linux" class="label label-default">linux</a></li>
  
    <a href="http://aalvarez.me/tags/zenpacklib" class="label label-default">zenpacklib</a></li>
  
</div>


  
    <div class="read-more-link">
      <a href="/posts/creating-zenoss-zenpack-daemons/">Read More…</a>
    </div>
  
</article>






  <div>
    
      <a href="http://aalvarez.me//page/16/" style="float: left;">← Newer Posts</a>
    

    
      <a href="http://aalvarez.me//page/18/" style="float: right;">Older Posts →</a>
    
  </div>



</div>
    </main>

    
  </body>
</html>

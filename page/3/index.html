<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="//gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.61.0" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <script type="application/ld+json">
{
    "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/aalvarez.me\/"
    },
    "articleSection" : "",
    "name" : "Andrés Álvarez",
    "headline" : "Andrés Álvarez",
    "description" : "",
    "inLanguage" : "en-US",
    "author" : "",
    "creator" : "",
    "publisher": "",
    "accountablePerson" : "",
    "copyrightHolder" : "",
    "copyrightYear" : "2020",
    "datePublished": "2020-05-06 15:27:47 -0600 CST",
    "dateModified" : "2020-05-06 15:27:47 -0600 CST",
    "url" : "https:\/\/aalvarez.me\/",
    "wordCount" : "0",
    "keywords" : [ "Blog" ]
}
</script>


  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-131322667-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


  <title>Andrés Álvarez</title>

  
  <link type="text/css" rel="stylesheet" href="https://aalvarez.me/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://aalvarez.me/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://aalvarez.me/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://aalvarez.me/css/hyde.css">
  <link type="text/css" rel="stylesheet" href="https://aalvarez.me/css/extra.css">
  <link type="text/css" rel="stylesheet" href="https://aalvarez.me/css/overrides.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://aalvarez.me/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://aalvarez.me/favicon.png">

  
  <link href="https://aalvarez.me/index.xml" rel="alternate" type="application/rss+xml" title="Andrés Álvarez" />

  
</head>

  <body class="theme-base-08 ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://aalvarez.me/"><h1>Andrés Álvarez</h1></a>
      <p class="lead">
       Software Engineer &amp; Web Developer 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="https://aalvarez.me/">Home</a> </li>
        <li><a href="https://aalvarez.me/tags/">Tags</a></li>
        <li><a href="https://aalvarez.me/about/"> About Me </a></li><li><a href="https://aalvarez.me/portfolio/"> Portfolio </a></li>
      </ul>
    </nav>

    
    <ul id="social-media" class="list-inline">
      
        <li>
           <a href="mailto:andresalvarez353@gmail.com" target="_blank"><i class="fa fa-envelope fa-2x" title="E-Mail"></i></a>
        </li>
      

      
        <li>
          <a href="https://linkedin.com/in/aalvarez4" target="_blank"><i class="fa fa-linkedin fa-2x" title="LinkedIn"></i></a>
        </li>
      

      
        <li>
          <a href="https://github.com/aalvrz" target="_blank"><i class="fa fa-github fa-2x" title="Github"></i></a>
        </li>
      

      
        <li>
          <a href="https://www.instagram.com/aalvrz_" target="_blank"><i class="fa fa-instagram fa-2x" title="Instagram"></i></a>
        </li>
      

      
        <li>
          <a href="https://aalvarez.me/index.xml" target="_blank"><i class="fa fa-rss fa-2x" title="RSS"></i></a>
        </li>
      
    </ul>

    <p>&copy; 2020. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="posts">

<article class="post">
  <h1 class="post-title">
    <a href="https://aalvarez.me/posts/setting-up-elastic-beanstalk-health-checks-with-a-django-application/">Setting Up Elastic Beanstalk Health Checks With a Django Application</a>
  </h1>
  <time datetime="2019-01-15T20:33:50Z" class="post-date">Tue, Jan 15, 2019</time>
  <p>I was having an issue the past few days with Django and Elastic Beanstalk in a production environment that was driving me nuts.</p>
<p>Basically the Elastic Beanstalk environment was in a permament Severe/Degraded state. The health monitoring was reporting that 100% of the requests to the load balancer were <code>4xx</code> requests:</p>
<p><img src="https://aalvarez.me/posts/setting-up-elastic-beanstalk-health-checks-with-a-django-application/eb_unhealthy_400_requests.png" alt="Elastic Beanstalk 4xx requests"></p>
<p>This issue was probably caused by several reasons. In this post I will go over the possible causes, and how I managed to resolve this issue.</p>

  
  <div style="margin: 20px 0px;">
  
    <a href="https://aalvarez.me/tags/django" class="label label-default">django</a></li>
  
    <a href="https://aalvarez.me/tags/elasticbeanstalk" class="label label-default">elasticbeanstalk</a></li>
  
</div>


  
    <div class="read-more-link">
      <a href="https://aalvarez.me/posts/setting-up-elastic-beanstalk-health-checks-with-a-django-application/">Read More…</a>
    </div>
  
</article>
<article class="post">
  <h1 class="post-title">
    <a href="https://aalvarez.me/posts/media-type-based-responses-with-django-rest-framework/">Media-Type Based Responses With Django REST Framework</a>
  </h1>
  <time datetime="2019-01-09T17:28:17Z" class="post-date">Wed, Jan 9, 2019</time>
  <p>Nowadays a typical REST API responds with data in JSON format. But what if you wanted to serve data in a different format (and not just a serialization format) using the <strong>same</strong> endpoint, but specified by the client?</p>
<p>Django REST Framework <a href="https://www.django-rest-framework.org/api-guide/renderers/">renderers</a> can help us achieve this nice feature.</p>
<h2 id="use-case-onix-for-books-compatible-api">Use Case: ONIX For Books Compatible API</h2>
<p><a href="https://en.wikipedia.org/wiki/ONIX_for_Books">ONIX for books</a> is an XML format for sharing bibliographic data pertaining to both traditional books and eBooks.</p>
<p>Let's say our application serves metadata about books (title, author, etc.) in the usual JSON format, but we also want to provide data in <a href="https://www.editeur.org/83/Overview/">ONIX</a> format, which is an XML standard that defines how the metadata should be described and put together for consumption.</p>

  
  <div style="margin: 20px 0px;">
  
    <a href="https://aalvarez.me/tags/django" class="label label-default">django</a></li>
  
    <a href="https://aalvarez.me/tags/djangorestframework" class="label label-default">djangorestframework</a></li>
  
</div>


  
    <div class="read-more-link">
      <a href="https://aalvarez.me/posts/media-type-based-responses-with-django-rest-framework/">Read More…</a>
    </div>
  
</article>
<article class="post">
  <h1 class="post-title">
    <a href="https://aalvarez.me/posts/python-functional-testing-for-aws-lambda/">Python Functional Testing for AWS Lambda</a>
  </h1>
  <time datetime="2018-12-26T17:17:28Z" class="post-date">Wed, Dec 26, 2018</time>
  <p>In this post I will explain and go over how I personally write functional tests for my AWS Lambda functions.</p>
<p>For our example use case, we will assume that our Lambda function is quite complex, as in that it involves downloading a file, processing it, and uploading a result. Additionally it will be called by an SQS event, and it make use of other non-Python related elements, as we will see later.</p>
<p>Let's get started!</p>

  
  <div style="margin: 20px 0px;">
  
    <a href="https://aalvarez.me/tags/python" class="label label-default">python</a></li>
  
    <a href="https://aalvarez.me/tags/pytest" class="label label-default">pytest</a></li>
  
    <a href="https://aalvarez.me/tags/aws-lambda" class="label label-default">aws lambda</a></li>
  
    <a href="https://aalvarez.me/tags/serverless" class="label label-default">serverless</a></li>
  
    <a href="https://aalvarez.me/tags/tdd" class="label label-default">tdd</a></li>
  
</div>


  
    <div class="read-more-link">
      <a href="https://aalvarez.me/posts/python-functional-testing-for-aws-lambda/">Read More…</a>
    </div>
  
</article>
<article class="post">
  <h1 class="post-title">
    <a href="https://aalvarez.me/posts/pytest-tricks-for-better-python-tests/">Pytest Tricks for Better Python Tests</a>
  </h1>
  <time datetime="2018-12-21T21:03:28Z" class="post-date">Fri, Dec 21, 2018</time>
  <p><a href="https://pytest.org/">Pytest</a> is my Python testing framework of choice. Very easy to use, and makes tests look much better.</p>
<p>In this article I'll show you some cool tricks I have incorporated into my test suites using Pytest.</p>
<h2 id="environment-variables">Environment Variables</h2>
<p>When your application must work with defined environment variables, the testing environment must have these variables defined as well, even if the values are not real.</p>
<p>With Pytest we can easily configure any necessary environment variables in our test environment. We simply create a fixture in <code>conftest.py</code> that will be loaded automatically:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># conftest.py</span>

<span style="color:#f92672">import</span> <span style="color:#111">pytest</span>


<span style="color:#75af00">@pytest.fixture</span><span style="color:#111">(</span><span style="color:#111">autouse</span><span style="color:#f92672">=</span><span style="color:#111">True</span><span style="color:#111">)</span>
<span style="color:#00a8c8">def</span> <span style="color:#75af00">env_setup</span><span style="color:#111">(</span><span style="color:#111">monkeypatch</span><span style="color:#111">)</span><span style="color:#111">:</span>
    <span style="color:#111">monkeypatch</span><span style="color:#f92672">.</span><span style="color:#111">setenv</span><span style="color:#111">(</span><span style="color:#d88200"></span><span style="color:#d88200">&#39;</span><span style="color:#d88200">MY_SETTING</span><span style="color:#d88200">&#39;</span><span style="color:#111">,</span> <span style="color:#d88200"></span><span style="color:#d88200">&#39;</span><span style="color:#d88200">some-value</span><span style="color:#d88200">&#39;</span><span style="color:#111">)</span>
    <span style="color:#111">monkeypatch</span><span style="color:#f92672">.</span><span style="color:#111">setenv</span><span style="color:#111">(</span><span style="color:#d88200"></span><span style="color:#d88200">&#39;</span><span style="color:#d88200">ANOTHER_SETTING</span><span style="color:#d88200">&#39;</span><span style="color:#111">,</span> <span style="color:#d88200"></span><span style="color:#d88200">&#39;</span><span style="color:#d88200">some-value</span><span style="color:#d88200">&#39;</span><span style="color:#111">)</span>
</code></pre></div><p><a href="https://docs.pytest.org/en/latest/monkeypatch.html"><code>monkeypatch</code></a> is a built-in pytest fixture that allows us to set environment variables in the test runs. By enabling the <code>autouse</code> option, our custom environment setup fixture will be automatically called in every test without having to include it explicitly using the usual dependency injection mechanism.</p>

  
  <div style="margin: 20px 0px;">
  
    <a href="https://aalvarez.me/tags/python" class="label label-default">python</a></li>
  
    <a href="https://aalvarez.me/tags/pytest" class="label label-default">pytest</a></li>
  
    <a href="https://aalvarez.me/tags/tdd" class="label label-default">tdd</a></li>
  
</div>


  
    <div class="read-more-link">
      <a href="https://aalvarez.me/posts/pytest-tricks-for-better-python-tests/">Read More…</a>
    </div>
  
</article>
<article class="post">
  <h1 class="post-title">
    <a href="https://aalvarez.me/posts/cloudfront-cors-font-issues/">CloudFront CORS Font Issues</a>
  </h1>
  <time datetime="2018-12-12T16:32:22Z" class="post-date">Wed, Dec 12, 2018</time>
  <p>I was experiencing an issue with CloudFront and some static assets of a Django application deployed to ElasticBeanstalk. The issue was happening when trying to retrieve some fonts that are stored in S3 and served by CloudFront, the browser dev tools would show some errors similar to the following:</p>
<pre><code>Access to Font at 'http://CLOUDFRONT_HOSTNAME.cloudfront.net/FONT_PATH' from origin 'http://www.example.com' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.
</code></pre><p>A <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">CORS</a> issue. And apparently, very common when trying to load fonts.</p>
<p>To fix this, there are a few possible things that you might have to try. I will list some of the fixes I found.</p>

  
  <div style="margin: 20px 0px;">
  
    <a href="https://aalvarez.me/tags/cloudfront" class="label label-default">cloudfront</a></li>
  
    <a href="https://aalvarez.me/tags/cors" class="label label-default">cors</a></li>
  
</div>


  
    <div class="read-more-link">
      <a href="https://aalvarez.me/posts/cloudfront-cors-font-issues/">Read More…</a>
    </div>
  
</article>






  <div>
    
      <a href="https://aalvarez.me//page/2/" style="float: left;">← Newer Posts</a>
    

    
      <a href="https://aalvarez.me//page/4/" style="float: right;">Older Posts →</a>
    
  </div>



</div>
    </main>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-131322667-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </body>
</html>
